@page "/counter"
@using Purchase.Data
@using Purchase.Services
@inject IMyService PurchaseService
<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @currentCount1</p>
<p role="status">Current count: @currentCount2</p>

<button class="btn btn-primary" @onclick="Create">Удалить</button>
@* <button class="btn btn-primary" @onclick="Delete">Редактировать</button>
<button class="btn btn-primary" @onclick="Update">Обновить</button> *@
<input type="text" class="textbox" placeholder="Поиск" />

@code {
    private int currentCount1 = 51;
    private int currentCount2 = 52;
    

    private async void Create()
    {
        string number1 = currentCount1.ToString();
        string number2 = currentCount2.ToString();
        string stroka = "В_процессе";
        var proposal1 = new Proposal
            {
                Number = number1,                    //Номер
                Department = "Supply Department",                //Отдел
                Author = "tree",                    //Автор
                DateCreation = DateTime.Now,        //Поступление
                Status = stroka                   //Статус
            };

        var proposal2 = new Proposal
            {
                Number = number2,                 
                Department = "Supply Department",                
                Author = "tree",            
                DateCreation = DateTime.Now,      
                Status = stroka                   
            };


        await PurchaseService.Create(proposal1); //Добавление
        await PurchaseService.Create(proposal2); //Добавление

        currentCount1 = currentCount1 + 2;
        currentCount2 = currentCount2 + 2;

    }

    // private async void Delete()
    // {
    //     await PurchaseService.Delete("6"); Удаление
    // }

    // private async void Update()
    // {
    //     string stroka = "В_процессе";
    //     var updatedProposal = new Proposal
    //         {
    //             Number = "7",                   Номер
    //             Department = "Supply Department",            Схемы
    //             Author = "tree",           Оснастка
    //             DateCreation = DateTime.Now,   Поступление
    //             Status = stroka                   Количество
    //         };

    //     await PurchaseService.Update(updatedProposal); Обновление
    // }

}
